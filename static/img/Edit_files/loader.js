if(location.href.indexOf("https://groove-widget-production.s3.amazonaws.com/cache-buster.html")<0){!function(e){if(!e.console){var t=function(){};e.console={log:t,info:t,warn:t,debug:t,error:t,important:t}}e._grv={api:{},settings:{},jsonpCallbacks:{},getJsonpCallback:function(t){return e._grv.jsonpCallbacks[t]||function(){}}}}(parent.window);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},innerWindow=window;!function(e,t,n){function o(){i(),r(e.groove._widgetQueue),A&&v()}function i(){e._grvq&&!e.groove&&(e.groove={_widgetQueue:e._grvq},e._grvq.push=function(){return e.groove._widgetQueue.push(Array.prototype.slice.call(arguments)),0}),e.groove.widget=function(){a(Array.prototype.slice.call(arguments))}}function r(e){for(;e.length;)a(e.shift())}function a(t){var n=t[0],o=t.slice(1);e._grv.api[n]?e._grv.api[n].apply(this,o):s("Invalid command '\""+n+'"')}function s(t){e.console.warn("Groove: "+t)}function c(n,o,i){if(e._grv.jsonpCallbacks[o])throw new Error('JSONP callback "'+o+'" already in progress.');e._grv.jsonpCallbacks[o]=function(t){i(t),delete e._grv.jsonpCallbacks[o]};var r=t.createElement("script"),a=t.getElementsByTagName("script")[0];n.indexOf("?")<0&&(n+="?"),r.src=n+"&callback=window._grv.getJsonpCallback('"+o+"')",r.className=j,r.onload=function(e){r.onload=null,r.parentNode.removeChild(r)},a.parentNode.insertBefore(r,a)}function l(){c("https://widget-backend.groovehq.com/versions/"+O+".json?"+Date.now(),"version",p)}function d(e){B||(B=t.documentElement.getAttribute("lang")||navigator.language||navigator.userLanguage||"en",B=B.split("-",1)[0]),B="en",c("https://widget-backend.groovehq.com/settings/"+O+".json?locale="+B+"&version="+e,"settings",u)}function p(n){if(n.assets!==E){var o=t.createElement("iframe");o.className=j,o.style.cssText="display:none",o.src="https://groove-widget-production.s3.amazonaws.com/cache-buster.html#"+n.assets,t.body.appendChild(o),e.parent._grv_cache_bust_count=e.parent._grv_cache_bust_count||0;var i=function r(t){var o=t.origin||t.originalEvent.origin;if("https://groove-widget-production.s3.amazonaws.com"===o&&"grv:cache-busted"===t.data){if(e.parent._grv_cache_bust_count=e.parent._grv_cache_bust_count+1,e.parent._grv_cache_bust_count>N)return e.removeEventListener("message",r),void d(n.settings);e.removeEventListener("message",r),m(n.assets)}};e.addEventListener("message",i,!1)}else d(n.settings)}function u(e){"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});var e=_extends({primaryBackgroundColor:"#3acfef",primaryForegroundColor:"#ffffff",color_scheme:"light-colors",buttonPosition:"bottom-right",buttonType:"circle",hidePoweredBy:!1},e);g(e)}function g(n){var o;n.widget_id=O,P=t.createElement("iframe"),P.src="javascript:false",P.style.visibility="hidden",P.style.opacity="0",P.style.position="fixed",P.style.top="-1000px",P.style.border="0",P.style["z-index"]="2147483647",P.className=[j,j+"-"+n.buttonPosition].join(" "),t.body.appendChild(P);try{z=P.contentWindow.document}catch(i){o=t.domain,P.src="javascript:var d=document.open();d.domain='"+o+"';void(0);",z=P.contentWindow.document}z.open()._l=function(){o&&(this.domain=o),P.style.visibility="visible",P.style.opacity="1";for(var e=this.getElementsByTagName("body")[0],t=["//d2wy8f7a9ursnm.cloudfront.net/bugsnag-2.min.js","https://groove-widget-production.s3.amazonaws.com/common-1ca1952ba8426652b90b.js","https://groove-widget-production.s3.amazonaws.com/main-71b2e578a5b784236320.js"],n=0;n<t.length;n++){var i=z.createElement("script");i.type="text/javascript",i.charset="utf-8",i.async=!0,t[n].indexOf("bugsnag")>=0&&i.setAttribute("data-apikey","559d85a217c39ce21e23bc38c90663b7"),i.src=t[n],e.appendChild(i)}},e._grv.settings=n,z.write('<body onload="document._l();">'),z.close();var r=t.createElement("style");r.type="text/css",r.innerText=".grv-widget-tag-bottom-right {position: fixed; bottom: 15px; right: 20px} .grv-widget-tag-bottom-left {position: fixed; bottom: 15px; left: 20px} .grv-widget-app-bottom-right {position: fixed; bottom: 0; right: 0} .grv-widget-app-bottom-left {position: fixed; bottom: 0; left: 0;} .grv-widget-app {position: fixed!important; top: 0!important; right: 0!important; bottom: 0!important; width: 100%!important; height: 100%!important; box-shadow: -1.5px 0 4px rgba(0, 0, 0, .24), -1.5px 0 6px rgba(0, 0, 0, .12)!important; z-index: 2147483637!important} @media (min-width: 900px) {.grv-widget-app {width: 35%!important; max-width: 550px!important; min-width: 450px!important}}",r.className=j,t.head.appendChild(r),P.addEventListener("click",function(){}),e.addEventListener("mousemove",q),e.addEventListener("resize",I),I()}function v(){return L!=k.unloaded?void s("Widget has already been loaded. Cannot load again until widget is unloaded."):(_(k.loader),void l())}function m(e){L=k.unloaded,b();var n=t.getElementById("grv-widget"),o=t.createElement("script");o.id="grv-widget",o.innerText=n.innerText,n.parentNode.removeChild(n),t.body.appendChild(o)}function f(){e.removeEventListener("mousemove",q),e.removeEventListener("resize",I),e._grv.jsonpCallbacks={},b(),h(),L=k.unloaded}function h(){var e=t.getElementById("grv-widget");e&&e.parentNode.removeChild(e)}function b(){for(var e=t.getElementsByClassName(j),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])}function y(e,t){var n,o,i,r=null,a=0,s=function(){a=0,r=null,i=e.apply(n,o),r||(n=o=null)};return function(){var c=Date.now();a||(a=c);var l=t-(c-a);return n=this,o=arguments,l<=0||l>t?(r&&(clearTimeout(r),r=null),a=c,i=e.apply(n,o),r||(n=o=null)):r||(r=setTimeout(s,l)),i}}function w(t,o){if(P){if("app"===t){P.className+=" grv-widget-app",t="400px",o="100%";var i=e._grv.settings.buttonPosition;P.className+=" grv-widget-app-"+i}else P.style.position=P.style.top=P.style.right=P.style.bottom=P.style.boxShadow="",P.className=P.className.replace(/ grv-widget-app[^ ]*/g,"");t!==n&&(P.style.width=t),o!==n&&(P.style.height=o),I()}}function _(e){L=e,r(W[e])}try{innerWindow.frameElement&&(innerWindow.frameElement.style.display="none")}catch(x){}var E="777216b",C=100,j="grv-widget-tag",N=3,k={unloaded:1,loader:2,main:3,preloaded:4,app:5},L=k.unloaded,P=void 0,O=void 0,z=void 0,B=void 0,T={left:0,top:0},A=!0,W={};Object.keys(k).map(function(e){return W[k[e]]=[]});var q=y(function(t){var n=Math.sqrt(Math.pow(t.clientX-T.left,2)+Math.pow(t.clientY-T.top,2));n<=C&&(e.removeEventListener("mousemove",q),e.removeEventListener("resize",I),z&&z.defaultView.grv.loadApp(),e.removeEventListener("mousemove",q))},80),I=y(function(e){var t=P.getBoundingClientRect();T.top=t.top+t.height/2,T.left=t.left+t.width/2},100);e._grv.resize=w,e._grv.extendPublicAPI=function(t){"object"==("undefined"==typeof t?"undefined":_typeof(t))&&_extends(e._grv.api,t)},e._grv.setLoadingPhaseByName=function(t,n){e._grv.extendPublicAPI(n),_(k[t])},e._grv.api={setWidgetId:function(e){O=e},setAutoload:function(e){A=e},setLocale:function(e){B=e},load:v,unload:f,open:function(e){L<k.preloaded&&W[k.preloaded].push(["open",e])},close:function(){L<k.preloaded&&W[k.preloaded].push(["close"])},selectPanel:function(e){L<k.preloaded&&W[k.preloaded].push(["selectPanel",e])},setCustomer:function(e){L<k.app&&W[k.app].push(["setCustomer",e])}},o()}(parent.window,parent.document)}
//# sourceMappingURL=loader.js.map
